<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>McbeEringi pcb-stuff</title>
	<style>
		:root{
			--w:#ffd;--k:#223;--fg:var(--k);--bg:var(--w);
			color:var(--fg);background-color:var(--bg);
			font-family:monospace;
		}
		@media(prefers-color-scheme:dark){:root{--fg:var(--w);--bg:var(--k);}}
		a{color:inherit;}
	</style>

</head>
<body>
	<h1>McbeEringi/pcb-stuff</h1>
	<h2>Projects</h2>
	<progress id="e"></progress>
	<script type="module">
		e.replaceWith(
			(await(
				await fetch(`https://api.github.com/repos/mcbeeringi/pcb-stuff/git/trees/HEAD?recursive=1`)
			).json()).tree
			.filter(({path:p})=>p.startsWith('proj/')&&p.endsWith('.kicad_pro'))
			.reduce((a,x)=>(
				x=x.path.match(/.*(?=\/.*\.kicad_pro)/)[0],
				a.append((li=>(
					li.append(Object.assign(document.createElement('a'),{
						href:`https://github.com/mcbeeringi/pcb-stuff/tree/main/${x}`,
						textContent:x
					})),
					li
				))(document.createElement('li'))),
				a
			),document.createElement('ul'))
		)
	</script>
</body>
</html>
